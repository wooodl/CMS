@model ComprehensiveManagementSystem.Models.PersonnelChange

@{
    ViewData["Title"] = "编辑人员变动";
}

<div class="layui-row">
    <div class="layui-col-md12">
        <div class="layui-card">
            <div class="layui-card-header">
                <h3>编辑人员变动记录</h3>
            </div>
            <div class="layui-card-body">
                <form asp-action="Edit" class="layui-form">
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                    <input type="hidden" asp-for="Id" />
                    <input type="hidden" asp-for="CreatedAt" />

                    <div class="layui-form-item">
                        <label class="layui-form-label">选择人员 <span class="required">*</span></label>
                        <div class="layui-input-block">
                            <select asp-for="PersonnelId" asp-items="ViewBag.PersonnelId as SelectList" id="personnelSelect" lay-verify="required" lay-search="">
                                <option value="">请选择人员</option>
                            </select>
                            <span asp-validation-for="PersonnelId" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">变动类型 <span class="required">*</span></label>
                        <div class="layui-input-block">
                            <select asp-for="ChangeType" asp-items="ViewBag.ChangeTypes as List<SelectListItem>" lay-verify="required">
                                <option value="">请选择变动类型</option>
                            </select>
                            <span asp-validation-for="ChangeType" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">变动日期 <span class="required">*</span></label>
                        <div class="layui-input-block">
                            <input asp-for="ChangeDate" class="layui-input" id="changeDate" lay-verify="required" readonly>
                            <span asp-validation-for="ChangeDate" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">变动原因</label>
                        <div class="layui-input-block">
                            <textarea asp-for="ChangeReason" placeholder="请输入变动原因" class="layui-textarea"></textarea>
                            <span asp-validation-for="ChangeReason" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">变动前机构</label>
                        <div class="layui-input-block">
                            <select asp-for="PreviousOrganizationId" asp-items="ViewBag.PreviousOrganizationId as SelectList" lay-search="">
                                <option value="">请选择变动前机构</option>
                            </select>
                            <span asp-validation-for="PreviousOrganizationId" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">变动后机构</label>
                        <div class="layui-input-block">
                            <select asp-for="NewOrganizationId" asp-items="ViewBag.NewOrganizationId as SelectList" lay-search="">
                                <option value="">请选择变动后机构</option>
                            </select>
                            <span asp-validation-for="NewOrganizationId" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">变动前职务</label>
                        <div class="layui-input-block">
                            <input asp-for="PreviousPosition" class="layui-input" placeholder="请输入变动前职务">
                            <span asp-validation-for="PreviousPosition" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">变动后职务</label>
                        <div class="layui-input-block">
                            <input asp-for="NewPosition" class="layui-input" placeholder="请输入变动后职务">
                            <span asp-validation-for="NewPosition" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">变动前级别</label>
                        <div class="layui-input-block">
                            <input asp-for="PreviousGrade" class="layui-input" placeholder="请输入变动前级别">
                            <span asp-validation-for="PreviousGrade" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">变动后级别</label>
                        <div class="layui-input-block">
                            <input asp-for="NewGrade" class="layui-input" placeholder="请输入变动后级别">
                            <span asp-validation-for="NewGrade" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">生效日期</label>
                        <div class="layui-input-block">
                            <input asp-for="EffectiveDate" class="layui-input" id="effectiveDate" readonly>
                            <span asp-validation-for="EffectiveDate" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">办理人</label>
                        <div class="layui-input-block">
                            <input asp-for="ProcessedBy" class="layui-input" placeholder="请输入办理人">
                            <span asp-validation-for="ProcessedBy" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">审批人</label>
                        <div class="layui-input-block">
                            <input asp-for="ApprovedBy" class="layui-input" placeholder="请输入审批人">
                            <span asp-validation-for="ApprovedBy" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">变动状态</label>
                        <div class="layui-input-block">
                            <select asp-for="Status" asp-items="ViewBag.StatusList as List<SelectListItem>">
                            </select>
                            <span asp-validation-for="Status" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">备注</label>
                        <div class="layui-input-block">
                            <textarea asp-for="Remarks" placeholder="请输入备注信息" class="layui-textarea"></textarea>
                            <span asp-validation-for="Remarks" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">相关文件</label>
                        <div class="layui-input-block">
                            <input asp-for="AttachmentPath" class="layui-input" placeholder="请输入文件路径">
                            <span asp-validation-for="AttachmentPath" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">创建人</label>
                        <div class="layui-input-block">
                            <input asp-for="CreatedBy" class="layui-input" placeholder="请输入创建人">
                            <span asp-validation-for="CreatedBy" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="layui-form-item" style="margin-bottom: 60px;">
                        <div class="layui-input-block">
                            <button type="submit" class="layui-btn layui-btn-normal">
                                <i class="layui-icon layui-icon-ok"></i> 保存
                            </button>
                            <a href="@Url.Action("Index")" class="layui-btn layui-btn-primary">
                                <i class="layui-icon layui-icon-return"></i> 返回列表
                            </a>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <script>
        layui.use(['form', 'laydate'], function(){
            var form = layui.form;
            var laydate = layui.laydate;

            // 日期选择器
            laydate.render({
                elem: '#changeDate',
                type: 'date',
                value: '@Model.ChangeDate.ToString("yyyy-MM-dd")'
            });

            @if (Model.EffectiveDate.HasValue)
            {
                <text>
                laydate.render({
                    elem: '#effectiveDate',
                    type: 'date',
                    value: '@Model.EffectiveDate.Value.ToString("yyyy-MM-dd")'
                });
                </text>
            }
            else
            {
                <text>
                laydate.render({
                    elem: '#effectiveDate',
                    type: 'date'
                });
                </text>
            }
        });
    </script>
    <style>
        .required {
            color: red;
        }
    </style>
}