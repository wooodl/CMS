@model ComprehensiveManagementSystem.Models.PersonnelBasicInfo

@{
    ViewData["Title"] = "编辑人员信息";
}

<div class="layui-row">
    <div class="layui-col-md12">
        <div class="layui-card">
            <div class="layui-card-header">
                <h3>编辑人员信息 - @Model.Name</h3>
            </div>
            <div class="layui-card-body">
                <form asp-action="Edit" class="layui-form" lay-filter="personnelForm">
                    <input type="hidden" asp-for="PersonnelId" />
                    <input type="hidden" asp-for="CreatedAt" />
                    
                    <div asp-validation-summary="ModelOnly" class="layui-alert layui-alert-danger" style="display: none;"></div>
                    
                    <!-- 基本信息 -->
                    <fieldset class="layui-elem-field layui-field-title">
                        <legend>基本信息</legend>
                    </fieldset>
                    
                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md6">
                            <div class="layui-form-item">
                                <label asp-for="Name" class="layui-form-label">姓名 <span style="color: red;">*</span></label>
                                <div class="layui-input-block">
                                    <input asp-for="Name" class="layui-input" lay-verify="required" placeholder="请输入姓名">
                                    <span asp-validation-for="Name" class="layui-text layui-text-red"></span>
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-md6">
                            <div class="layui-form-item">
                                <label asp-for="Gender" class="layui-form-label">性别 <span style="color: red;">*</span></label>
                                <div class="layui-input-block">
                                    <select asp-for="Gender" lay-verify="required">
                                        <option value="">请选择性别</option>
                                        <option value="0">女</option>
                                        <option value="1">男</option>
                                    </select>
                                    <span asp-validation-for="Gender" class="layui-text layui-text-red"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md6">
                            <div class="layui-form-item">
                                <label asp-for="IdCard" class="layui-form-label">身份证号 <span style="color: red;">*</span></label>
                                <div class="layui-input-block">
                                    <input asp-for="IdCard" class="layui-input" lay-verify="required|identity" placeholder="请输入身份证号">
                                    <span asp-validation-for="IdCard" class="layui-text layui-text-red"></span>
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-md6">
                            <div class="layui-form-item">
                                <label asp-for="BirthDate" class="layui-form-label">出生年月 <span style="color: red;">*</span></label>
                                <div class="layui-input-block">
                                    <input asp-for="BirthDate" class="layui-input" lay-verify="required|date" placeholder="请选择出生年月" value="@Model.BirthDate.ToString("yyyy-MM-dd")">
                                    <span asp-validation-for="BirthDate" class="layui-text layui-text-red"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md6">
                            <div class="layui-form-item">
                                <label asp-for="NativePlace" class="layui-form-label">籍贯</label>
                                <div class="layui-input-block">
                                    <input asp-for="NativePlace" class="layui-input" placeholder="请输入籍贯">
                                    <span asp-validation-for="NativePlace" class="layui-text layui-text-red"></span>
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-md6">
                            <div class="layui-form-item">
                                <label asp-for="Education" class="layui-form-label">学历</label>
                                <div class="layui-input-block">
                                    <select asp-for="Education">
                                        <option value="">请选择学历</option>
                                        <option value="小学">小学</option>
                                        <option value="初中">初中</option>
                                        <option value="高中">高中</option>
                                        <option value="中专">中专</option>
                                        <option value="大专">大专</option>
                                        <option value="本科">本科</option>
                                        <option value="硕士">硕士</option>
                                        <option value="博士">博士</option>
                                    </select>
                                    <span asp-validation-for="Education" class="layui-text layui-text-red"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 工作信息 -->
                    <fieldset class="layui-elem-field layui-field-title">
                        <legend>工作信息</legend>
                    </fieldset>

                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md6">
                            <div class="layui-form-item">
                                <label asp-for="HireDate" class="layui-form-label">入职时间 <span style="color: red;">*</span></label>
                                <div class="layui-input-block">
                                    <input asp-for="HireDate" class="layui-input" lay-verify="required|date" placeholder="请选择入职时间" value="@Model.HireDate.ToString("yyyy-MM-dd")">
                                    <span asp-validation-for="HireDate" class="layui-text layui-text-red"></span>
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-md6">
                            <div class="layui-form-item">
                                <label asp-for="DepartmentId" class="layui-form-label">部门</label>
                                <div class="layui-input-block">
                                    <select asp-for="DepartmentId" asp-items="ViewBag.DepartmentId" lay-search="">
                                        <option value="">请选择部门</option>
                                    </select>
                                    <span asp-validation-for="DepartmentId" class="layui-text layui-text-red"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md6">
                            <div class="layui-form-item">
                                <label asp-for="Position" class="layui-form-label">岗位</label>
                                <div class="layui-input-block">
                                    <input asp-for="Position" class="layui-input" placeholder="请输入岗位">
                                    <span asp-validation-for="Position" class="layui-text layui-text-red"></span>
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-md6">
                            <div class="layui-form-item">
                                <label asp-for="Duty" class="layui-form-label">职务</label>
                                <div class="layui-input-block">
                                    <input asp-for="Duty" class="layui-input" placeholder="请输入职务">
                                    <span asp-validation-for="Duty" class="layui-text layui-text-red"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 其他信息 -->
                    <fieldset class="layui-elem-field layui-field-title">
                        <legend>其他信息</legend>
                    </fieldset>

                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md6">
                            <div class="layui-form-item">
                                <label asp-for="PoliticalStatus" class="layui-form-label">政治面貌</label>
                                <div class="layui-input-block">
                                    <select asp-for="PoliticalStatus">
                                        <option value="">请选择政治面貌</option>
                                        <option value="群众">群众</option>
                                        <option value="共青团员">共青团员</option>
                                        <option value="中共党员">中共党员</option>
                                        <option value="民主党派">民主党派</option>
                                    </select>
                                    <span asp-validation-for="PoliticalStatus" class="layui-text layui-text-red"></span>
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-md6">
                            <div class="layui-form-item">
                                <label asp-for="MaritalStatus" class="layui-form-label">婚姻状况</label>
                                <div class="layui-input-block">
                                    <select asp-for="MaritalStatus">
                                        <option value="0">未婚</option>
                                        <option value="1">已婚</option>
                                        <option value="2">离异</option>
                                        <option value="3">丧偶</option>
                                    </select>
                                    <span asp-validation-for="MaritalStatus" class="layui-text layui-text-red"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md6">
                            <div class="layui-form-item">
                                <label asp-for="Phone" class="layui-form-label">联系电话</label>
                                <div class="layui-input-block">
                                    <input asp-for="Phone" class="layui-input" lay-verify="phone" placeholder="请输入联系电话">
                                    <span asp-validation-for="Phone" class="layui-text layui-text-red"></span>
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-md6">
                            <div class="layui-form-item">
                                <label asp-for="ExcellentCount" class="layui-form-label">近三年优秀次数</label>
                                <div class="layui-input-block">
                                    <input asp-for="ExcellentCount" class="layui-input" lay-verify="number" placeholder="请输入优秀次数">
                                    <span asp-validation-for="ExcellentCount" class="layui-text layui-text-red"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label asp-for="HomeAddress" class="layui-form-label">家庭住址</label>
                        <div class="layui-input-block">
                            <input asp-for="HomeAddress" class="layui-input" placeholder="请输入家庭住址">
                            <span asp-validation-for="HomeAddress" class="layui-text layui-text-red"></span>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label asp-for="WorkAddress" class="layui-form-label">单位地址</label>
                        <div class="layui-input-block">
                            <input asp-for="WorkAddress" class="layui-input" placeholder="请输入单位地址">
                            <span asp-validation-for="WorkAddress" class="layui-text layui-text-red"></span>
                        </div>
                    </div>

                    <!-- 提交按钮 -->
                    <div class="layui-form-item">
                        <div class="layui-input-block">
                            <button type="submit" class="layui-btn layui-btn-normal" lay-submit="" lay-filter="submit">
                                <i class="layui-icon layui-icon-ok"></i> 保存修改
                            </button>
                            <a href="@Url.Action("Details", new { id = Model.PersonnelId })" class="layui-btn layui-btn-primary">
                                <i class="layui-icon layui-icon-return"></i> 返回详情
                            </a>
                            <a href="@Url.Action("Index")" class="layui-btn layui-btn-primary">
                                <i class="layui-icon layui-icon-return"></i> 返回列表
                            </a>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        layui.use(['form', 'laydate'], function(){
            var form = layui.form;
            var laydate = layui.laydate;
            
            // 日期选择器
            laydate.render({
                elem: '[asp-for="BirthDate"]',
                type: 'date',
                max: 0
            });
            
            laydate.render({
                elem: '[asp-for="HireDate"]',
                type: 'date'
            });
            
            // 自定义验证规则
            form.verify({
                identity: function(value){
                    if(value && !/^\d{17}[\dXx]$/.test(value)){
                        return '身份证号格式不正确';
                    }
                }
            });

            // 表单提交
            form.on('submit(submit)', function(data){
                return true;
            });
        });
    </script>
}

@section ValidationScripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}