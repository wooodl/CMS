@model ComprehensiveManagementSystem.Models.PersonnelBasicInfo

@{
    ViewData["Title"] = "编辑人员";
}

<div class="layui-row">
    <div class="layui-col-md12">
        <div class="layui-card">
            <div class="layui-card-header">
                <h3>编辑人员基本信息</h3>
            </div>
            <div class="layui-card-body">
                <form asp-action="Edit" class="layui-form" lay-filter="personnelForm">
                    <div asp-validation-summary="ModelOnly" class="layui-alert layui-alert-danger" style="display: none;"></div>
                    
                    <input type="hidden" asp-for="PersonnelId" />
                    <input type="hidden" asp-for="CreatedAt" />
                    
                    <!-- 基本信息 -->
                    <fieldset class="layui-elem-field layui-field-title">
                        <legend>基本信息</legend>
                    </fieldset>
                    
                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md6">
                            <div class="layui-form-item">
                                <label asp-for="Name" class="layui-form-label">姓名 <span style="color: red;">*</span></label>
                                <div class="layui-input-block">
                                    <input asp-for="Name" class="layui-input" lay-verify="required" placeholder="请输入姓名">
                                    <span asp-validation-for="Name" class="layui-text layui-text-red"></span>
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-md6">
                            <div class="layui-form-item">
                                <label asp-for="Gender" class="layui-form-label">性别 <span style="color: red;">*</span></label>
                                <div class="layui-input-block">
                                    <select asp-for="Gender" lay-verify="required">
                                        <option value="">请选择性别</option>
                                        <option value="0">女</option>
                                        <option value="1">男</option>
                                    </select>
                                    <span asp-validation-for="Gender" class="layui-text layui-text-red"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md6">
                            <div class="layui-form-item">
                                <label asp-for="IdCard" class="layui-form-label">身份证号 <span style="color: red;">*</span></label>
                                <div class="layui-input-block">
                                    <input asp-for="IdCard" class="layui-input" lay-verify="required|identity" placeholder="请输入身份证号">
                                    <span asp-validation-for="IdCard" class="layui-text layui-text-red"></span>
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-md6">
                            <div class="layui-form-item">
                                <label asp-for="BirthDate" class="layui-form-label">出生年月 <span style="color: red;">*</span></label>
                                <div class="layui-input-block">
                                    <input asp-for="BirthDate" id="BirthDate" class="layui-input" lay-verify="required|date" placeholder="请选择出生年月">
                                    <span asp-validation-for="BirthDate" class="layui-text layui-text-red"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md6">
                            <div class="layui-form-item">
                                <label asp-for="NativePlace" class="layui-form-label">籍贯</label>
                                <div class="layui-input-block">
                                    <input asp-for="NativePlace" class="layui-input" placeholder="请输入籍贯">
                                    <span asp-validation-for="NativePlace" class="layui-text layui-text-red"></span>
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-md6">
                            <div class="layui-form-item">
                                <label asp-for="Nation" class="layui-form-label">民族</label>
                                <div class="layui-input-block">
                                    <select asp-for="Nation">
                                        <option value="">请选择民族</option>
                                        <option value="汉族">汉族</option>
                                        <option value="蒙古族">蒙古族</option>
                                        <option value="回族">回族</option>
                                        <option value="藏族">藏族</option>
                                        <option value="维吾尔族">维吾尔族</option>
                                        <option value="苗族">苗族</option>
                                        <option value="彝族">彝族</option>
                                        <option value="壮族">壮族</option>
                                        <option value="布依族">布依族</option>
                                        <option value="朝鲜族">朝鲜族</option>
                                        <option value="满族">满族</option>
                                        <option value="侗族">侗族</option>
                                        <option value="瑶族">瑶族</option>
                                        <option value="白族">白族</option>
                                        <option value="土家族">土家族</option>
                                        <option value="哈尼族">哈尼族</option>
                                        <option value="哈萨克族">哈萨克族</option>
                                        <option value="傣族">傣族</option>
                                        <option value="黎族">黎族</option>
                                        <option value="傈僳族">傈僳族</option>
                                        <option value="其他">其他</option>
                                    </select>
                                    <span asp-validation-for="Nation" class="layui-text layui-text-red"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md6">
                            <div class="layui-form-item">
                                <label asp-for="Education" class="layui-form-label">学历</label>
                                <div class="layui-input-block">
                                    <select asp-for="Education">
                                        <option value="">请选择学历</option>
                                        <option value="小学">小学</option>
                                        <option value="初中">初中</option>
                                        <option value="高中">高中</option>
                                        <option value="中专">中专</option>
                                        <option value="大专">大专</option>
                                        <option value="本科">本科</option>
                                        <option value="硕士">硕士</option>
                                        <option value="博士">博士</option>
                                    </select>
                                    <span asp-validation-for="Education" class="layui-text layui-text-red"></span>
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-md6">
                            <div class="layui-form-item">
                                <label asp-for="MaritalStatus" class="layui-form-label">婚姻状况</label>
                                <div class="layui-input-block">
                                    <select asp-for="MaritalStatus">
                                        <option value="0">未婚</option>
                                        <option value="1">已婚</option>
                                        <option value="2">离异</option>
                                        <option value="3">丧偶</option>
                                    </select>
                                    <span asp-validation-for="MaritalStatus" class="layui-text layui-text-red"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 工作信息 -->
                    <fieldset class="layui-elem-field layui-field-title">
                        <legend>工作信息</legend>
                    </fieldset>

                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md6">
                            <div class="layui-form-item">
                                <label asp-for="HireDate" class="layui-form-label">入职年月 <span style="color: red;">*</span></label>
                                <div class="layui-input-block">
                                    <input asp-for="HireDate" id="HireDate" class="layui-input" lay-verify="required|date" placeholder="请选择入职时间">
                                    <span asp-validation-for="HireDate" class="layui-text layui-text-red"></span>
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-md6">
                            <div class="layui-form-item">
                                <label asp-for="WorkId" class="layui-form-label">工作证号</label>
                                <div class="layui-input-block">
                                    <input asp-for="WorkId" class="layui-input" placeholder="请输入工作证号">
                                    <span asp-validation-for="WorkId" class="layui-text layui-text-red"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md6">
                            <div class="layui-form-item">
                                <label asp-for="DepartmentId" class="layui-form-label">部门</label>
                                <div class="layui-input-block">
                                    <select asp-for="DepartmentId" asp-items="ViewBag.DepartmentId" lay-search="">
                                        <option value="">请选择部门</option>
                                    </select>
                                    <span asp-validation-for="DepartmentId" class="layui-text layui-text-red"></span>
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-md6">
                            <div class="layui-form-item">
                                <label asp-for="Position" class="layui-form-label">岗位</label>
                                <div class="layui-input-block">
                                    <input asp-for="Position" class="layui-input" placeholder="请输入岗位">
                                    <span asp-validation-for="Position" class="layui-text layui-text-red"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md6">
                            <div class="layui-form-item">
                                <label asp-for="Duty" class="layui-form-label">职务</label>
                                <div class="layui-input-block">
                                    <input asp-for="Duty" class="layui-input" placeholder="请输入职务">
                                    <span asp-validation-for="Duty" class="layui-text layui-text-red"></span>
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-md6">
                            <div class="layui-form-item">
                                <label asp-for="DutyLevel" class="layui-form-label">职务等级</label>
                                <div class="layui-input-block">
                                    <input asp-for="DutyLevel" class="layui-input" placeholder="请输入职务等级">
                                    <span asp-validation-for="DutyLevel" class="layui-text layui-text-red"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 其他信息 -->
                    <fieldset class="layui-elem-field layui-field-title">
                        <legend>其他信息</legend>
                    </fieldset>

                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md6">
                            <div class="layui-form-item">
                                <label asp-for="PoliticalStatus" class="layui-form-label">政治面貌</label>
                                <div class="layui-input-block">
                                    <select asp-for="PoliticalStatus">
                                        <option value="">请选择政治面貌</option>
                                        <option value="群众">群众</option>
                                        <option value="共青团员">共青团员</option>
                                        <option value="中共党员">中共党员</option>
                                        <option value="民主党派">民主党派</option>
                                    </select>
                                    <span asp-validation-for="PoliticalStatus" class="layui-text layui-text-red"></span>
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-md6">
                            <div class="layui-form-item">
                                <label asp-for="PersonnelCategory" class="layui-form-label">人员类别</label>
                                <div class="layui-input-block">
                                    <select asp-for="PersonnelCategory">
                                        <option value="">请选择人员类别</option>
                                        <option value="干部">干部</option>
                                        <option value="工人">工人</option>
                                        <option value="技术人员">技术人员</option>
                                        <option value="管理人员">管理人员</option>
                                        <option value="临时工">临时工</option>
                                    </select>
                                    <span asp-validation-for="PersonnelCategory" class="layui-text layui-text-red"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md6">
                            <div class="layui-form-item">
                                <label asp-for="Grade" class="layui-form-label">级别</label>
                                <div class="layui-input-block">
                                    <input asp-for="Grade" class="layui-input" placeholder="请输入级别">
                                    <span asp-validation-for="Grade" class="layui-text layui-text-red"></span>
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-md6">
                            <div class="layui-form-item">
                                <label asp-for="Phone" class="layui-form-label">联系电话</label>
                                <div class="layui-input-block">
                                    <input asp-for="Phone" class="layui-input" lay-verify="phone" placeholder="请输入联系电话">
                                    <span asp-validation-for="Phone" class="layui-text layui-text-red"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 提交按钮 -->
                    <div class="layui-form-item">
                        <div class="layui-input-block">
                            <button type="submit" class="layui-btn layui-btn-normal" lay-submit="" lay-filter="submit">
                                <i class="layui-icon layui-icon-ok"></i> 保存
                            </button>
                            <a href="@Url.Action("Index")" class="layui-btn layui-btn-primary">
                                <i class="layui-icon layui-icon-return"></i> 返回
                            </a>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        layui.use(['form', 'laydate'], function(){
            var form = layui.form;
            var laydate = layui.laydate;
            
            // 日期选择器
            laydate.render({
                elem: '#BirthDate',
                type: 'date',
                max: 0,
                format: 'yyyy-MM-dd',
                value: '@(Model.BirthDate.ToString("yyyy-MM-dd"))'
            });
            
            laydate.render({
                elem: '#HireDate',
                type: 'date',
                format: 'yyyy-MM-dd',
                value: '@(Model.HireDate.ToString("yyyy-MM-dd"))'
            });
            
            // 自定义验证规则
            form.verify({
                identity: function(value){
                    if(value && !/^\d{17}[\dXx]$/.test(value)){
                        return '身份证号格式不正确';
                    }
                }
            });

            // 表单提交
            form.on('submit(submit)', function(data){
                // 这里可以添加额外的验证逻辑
                return true;
            });
        });
    </script>
}

@section ValidationScripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}